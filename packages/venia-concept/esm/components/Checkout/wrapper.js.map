{"version":3,"sources":["../../../src/components/Checkout/wrapper.js"],"names":["React","Component","connect","array","bool","func","object","oneOf","shape","string","beginCheckout","cancelCheckout","editOrder","submitShippingAddress","submitOrder","submitPaymentMethodAndBillingAddress","submitShippingMethod","Flow","hasData","value","isCartReady","cart","details","items_count","isCheckoutReady","checkout","billingAddress","paymentData","shippingAddress","shippingMethod","every","CheckoutWrapper","render","directory","requestOrder","user","props","actions","availableShippingMethods","miscProps","hasPaymentMethod","hasShippingAddress","hasShippingMethod","flowProps","isRequired","cartId","totals","city","country_id","email","firstname","lastname","postcode","region_id","region_code","region","street","telephone","editing","incorrectAddressMessage","isAddressIncorrect","paymentCode","description","cardType","nonce","shippingTitle","step","submitting","countries","isSignedIn","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'src/drivers';\nimport { array, bool, func, object, oneOf, shape, string } from 'prop-types';\n\nimport {\n    beginCheckout,\n    cancelCheckout,\n    editOrder,\n    submitShippingAddress,\n    submitOrder,\n    submitPaymentMethodAndBillingAddress,\n    submitShippingMethod\n} from 'src/actions/checkout';\n\nimport Flow from './flow';\n\nconst hasData = value => !!value;\nconst isCartReady = cart => cart.details.items_count > 0;\nconst isCheckoutReady = checkout => {\n    const {\n        billingAddress,\n        paymentData,\n        shippingAddress,\n        shippingMethod\n    } = checkout;\n\n    return [billingAddress, paymentData, shippingAddress, shippingMethod].every(\n        hasData\n    );\n};\n\nexport class CheckoutWrapper extends Component {\n    static propTypes = {\n        beginCheckout: func,\n        cancelCheckout: func,\n        cart: shape({\n            details: object.isRequired,\n            cartId: string,\n            totals: object\n        }).isRequired,\n        checkout: shape({\n            availableShippingMethods: array,\n            billingAddress: shape({\n                city: string,\n                country_id: string,\n                email: string,\n                firstname: string,\n                lastname: string,\n                postcode: string,\n                region_id: string,\n                region_code: string,\n                region: string,\n                street: array,\n                telephone: string\n            }),\n            editing: oneOf(['address', 'paymentMethod', 'shippingMethod']),\n            incorrectAddressMessage: string,\n            isAddressIncorrect: bool,\n            paymentCode: string,\n            paymentData: shape({\n                description: string,\n                details: shape({\n                    cardType: string\n                }),\n                nonce: string\n            }),\n            shippingAddress: shape({\n                city: string,\n                country_id: string,\n                email: string,\n                firstname: string,\n                lastname: string,\n                postcode: string,\n                region_id: string,\n                region_code: string,\n                region: string,\n                street: array,\n                telephone: string\n            }),\n            shippingMethod: string,\n            shippingTitle: string,\n            step: oneOf(['cart', 'form', 'receipt']).isRequired,\n            submitting: bool.isRequired\n        }),\n        directory: shape({\n            countries: array\n        }),\n        editOrder: func,\n        submitShippingAddress: func,\n        submitOrder: func,\n        submitPaymentMethodAndBillingAddress: func,\n        submitShippingMethod: func,\n        user: shape({\n            isSignedIn: bool\n        })\n    };\n\n    render() {\n        const {\n            beginCheckout,\n            cancelCheckout,\n            cart,\n            checkout,\n            directory,\n            editOrder,\n            requestOrder,\n            submitShippingAddress,\n            submitOrder,\n            submitPaymentMethodAndBillingAddress,\n            submitShippingMethod,\n            user\n        } = this.props;\n\n        // ensure state slices are present\n        if (!(cart && checkout)) {\n            return null;\n        }\n\n        const actions = {\n            beginCheckout,\n            cancelCheckout,\n            editOrder,\n            requestOrder,\n            submitShippingAddress,\n            submitOrder,\n            submitPaymentMethodAndBillingAddress,\n            submitShippingMethod\n        };\n\n        const {\n            availableShippingMethods,\n            paymentData,\n            shippingAddress,\n            shippingMethod\n        } = checkout;\n\n        const miscProps = {\n            availableShippingMethods,\n            hasPaymentMethod: hasData(paymentData),\n            hasShippingAddress: hasData(shippingAddress),\n            hasShippingMethod: hasData(shippingMethod),\n            isCartReady: isCartReady(cart),\n            isCheckoutReady: isCheckoutReady(checkout)\n        };\n\n        const flowProps = {\n            actions,\n            cart,\n            checkout,\n            directory,\n            user,\n            ...miscProps\n        };\n\n        return <Flow {...flowProps} />;\n    }\n}\n\nconst mapStateToProps = ({ cart, checkout, directory, user }) => ({\n    cart,\n    checkout,\n    directory,\n    user\n});\n\nconst mapDispatchToProps = {\n    beginCheckout,\n    cancelCheckout,\n    editOrder,\n    submitShippingAddress,\n    submitOrder,\n    submitPaymentMethodAndBillingAddress,\n    submitShippingMethod\n};\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(CheckoutWrapper);\n"],"file":"wrapper.js"}